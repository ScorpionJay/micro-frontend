#简介说明

> 作者：小兵
> 来源：项目重构

下面是简易说明来自官方，更多说明：https://docs.npmjs.com/files/package-lock.json
即使您在 package.json 中使用了确切的版本，您也可能会遇到问题，因为依赖关系的依赖关系未锁定。补丁包中某些深层嵌套的依赖项的重大更改可能会破坏您的构建。当它在 CI 上或在部署期间发生时，尤其难以调试。

从版本 5 开始，npm 支持 lockfiles。npm install 会将已安装软件包的版本写入文件 package-lock.json 中。该文件应提交到项目存储库。下次有人运行时 npm install，npm 将使用此锁定文件中指定的版本。

Yarn 是 npm 的替代方案，它首先实现了锁定文件的概念，但是它们使用了不兼容的格式和 yarn.lock 文件。

是锁定安装时的包的版本号（锁住大版本），并且需要上传到 git，以保证其他人在 npm install 时大家的依赖能保证一致。

```

package-lock.json会为npm修改node_modules树或的任何操作自动生成package.json。它描述了生成的确切树，因此无论中间依赖项更新如何，后续安装都可以生成相同的树。

该文件旨在提交到源存储库中，并具有多种用途：

描述一个依赖关系树的单一表示，这样可以确保队友，部署和持续集成安装完全相同的依赖关系。

为用户提供一种工具，使其可以“时间旅行”到以前的状态，node_modules而不必提交目录本身。

为了通过可读的源代码控制差异更好地了解树的变化。

并允许npm跳过以前安装的软件包的重复元数据解析，从而优化安装过程。

关于package-lock.json它的一个关键细节是它无法发布，并且如果在顶级软件包之外的任何地方找到它，它将被忽略。它与npm-shrinkwrap.json共享一种格式，该格式本质上是相同的文件，但是可以发布。除非部署CLI工具或使用发布过程来生产生产软件包，否则不建议这样做。

如果软件包的根目录中同时存在package-lock.json和npm-shrinkwrap.json，package-lock.json将被完全忽略。

```
